// ---------------------------------------------- //
// SSDS post-process wpipeline default config file     //
// ---------------------------------------------- //
// Default config options for all environments.

params {
	//PIPELINE DEPENDANCIES
	name = "SSDS_postprocess_pipeline"
	finalpeaksbed = "/work/commun/demassyTeam/2021_FIRE_DMC1_SSDS_pipeline_mm10.outdir/peaks/without-input/finalpeaks/WT_DMC1_KEY_R1.finalPeaks_noIDR.bed"
	sample_name = "2021_FIRE_DMC1"
	outdir = "${baseDir}/${params.name}.outdir/postprocess"
	//with_idr = 
	bamfolder = "/work/commun/demassyTeam/2021_FIRE_DMC1_SSDS_pipeline_mm10.outdir/bwa/filterbam/flag_*/parse_itr/type1/bam"
	bampattern = "*.bam"
	peakreference = "/home/demassyie/work/results/ChIP_Dmc1_cKO_Hells_NovaSeq.outdir/peaks/without-input/finalpeaks/idr/narrowPeak_macs2pv0.1_macs2qv-1_idr-thresholdnull_setup-auto/M_WT_truerep.idr0.05.narrowPeak.gz.finalPeaks_IDR.bed"
	bamreference = "/home/demassyie/work/results/ChIP_Dmc1_cKO_Hells_NovaSeq.outdir/bwa/filterbam/flag_3340/parse_itr/type1/bam"
	bigwigfolder = "/work/commun/demassyTeam/2021_FIRE_DMC1_SSDS_pipeline_mm10.outdir/bigwig/kbrick_bigwig/deeptools/binsize50"
	bigwigpattern = "*ssDNA_type1.deeptools.RPKM.bigwig"
	publishdir_mode = "copy"
	with_clustering = false
	with_heatmap = false
	with_FR_heatmap = true
	with_FR_bigwig = true	
	corMethod = "spearman"
	corPlot = "heatmap"
	heatmap_width = "20"
	matrix_downstream = "2500"
	matrix_upstream = "2500"	
	src = "${baseDir}/accessoryFiles/SSDS/scripts"
	scratch = "${params.outdir}/scratch"
	chrsize = "${baseDir}/accessoryFiles/SSDS/mm10/mm10.chrom.sizes"
	trimmomatic_adapters = "${baseDir}/TruSeq2-PE.fa"
	multiqc_configfile = "${baseDir}/multiqc_config.yaml"
	custom_bwa = "${baseDir}/accessoryFiles/SSDS/bwa_0.7.12"
	custom_bwa_ra = "${baseDir}/accessoryFiles/SSDS/bwa_ra_0.7.12"
	hotspots = "${baseDir}/accessoryFiles/SSDS/hotspots"
	multiqc_dev_conda_env = "${baseDir}/multiqc_dev"
	custom_multiqc = "${baseDir}/accessoryFiles/SSDS/MultiQC_SSDS_Rev1/bin/multiqc"
	blacklist = "${baseDir}/accessoryFiles/SSDS/blacklist/mm10/blackList.bed"

	genome2screen = ['mm10','hg19','dm6','hg38','sacCer2','sacCer3']

	//WEB KEYS PARAMETERS
	//ncbi_api_key='bd4fbe570fd4707136df9302e75b1aa9b108'    // attached to pauline auffret ncbi account.
	tower_token='db33ecd8b1cc2e1b39972b4d82614d379b84f878' // attached to pauline auffret tower account.
}

// PROFILES PARAMETERS
profiles {
  conda {
    process.conda = "${baseDir}/environment.yml"
    conda.createTimeout = '5 h'
  }
  singularity {
    process.container = "${baseDir}/singularity.img"
    singularity.enabled = true
    singularity.autoMounts = true
  }
}

//NEXTFLOW REPORT PARAMETERS
report {
   enabled = true
   file = "${params.outdir}/nxfReports/report.html"
}
 
timeline {
    enabled = true
    file = "${params.outdir}/nxfReports/timeline.html"
}

trace {
   enabled = true
   file = "${params.outdir}/nxfReports/trace.txt"
}

manifest {
   name = 'SSDS post-process pipeline'
   author = 'Pauline Auffret'
   homePage = 'https://gitlab.igh.cnrs.fr/pauline.auffret/ssdspostprocess'
   description = 'Compute and Plot general statistics about SSDS processed data, 2021.'
   mainScript = 'main.nf'
   nextflowVersion = '>=20.04.1'
   version = '1.0'
}

dag {
   enabled = true
   file = "${params.outdir}/nxfReports/dag.png"
}

tower {
  accessToken = params.tower_token
  enabled = false
}


