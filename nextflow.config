// ---------------------------------------------- //
// SSDS post-process wpipeline default config file     //
// ---------------------------------------------- //
// Default config options for all environments.

params {
	// PIPELINE DEPENDANCIES
	src = "${baseDir}/src"
	scratch = "${params.outdir}/scratch"
	multiqc_configfile = "${baseDir}/multiqc_config.yaml"

	// GENERAL PARAMETERS
	name = "SSDS_postprocess_pipeline"
	sample_name = "2021_FIRE_DMC1"
	publishdir_mode = "copy"

	// PIPELINE MODE PARAMETERS
	with_clustering = false
	with_heatmap = false
	with_FR_heatmap = false
	with_FR_bigwig = false
	with_peak_annot = true

	// INPUT FILES AND FOLDERS
	finalpeaksbed = "/work/commun/demassyTeam/2021_FIRE_DMC1_SSDS_pipeline_mm10.outdir/peaks/without-input/finalpeaks/WT_DMC1_KEY_R1.finalPeaks_noIDR.bed"
	peakreference = "/home/demassyie/work/results/ChIP_Dmc1_cKO_Hells_NovaSeq.outdir/peaks/without-input/finalpeaks/idr/narrowPeak_macs2pv0.1_macs2qv-1_idr-thresholdnull_setup-    auto/M_WT_truerep.idr0.05.narrowPeak.gz.finalPeaks_IDR.bed"
	bamfolder = "/work/commun/demassyTeam/2021_FIRE_DMC1_SSDS_pipeline_mm10.outdir/bwa/filterbam/flag_*/parse_itr/type1/bam"
	bampattern = "*.bam"
	bamreference = "/home/demassyie/work/results/ChIP_Dmc1_cKO_Hells_NovaSeq.outdir/bwa/filterbam/flag_3340/parse_itr/type1/bam"
	bigwigfolder = "/work/commun/demassyTeam/2021_FIRE_DMC1_SSDS_pipeline_mm10.outdir/bigwig/kbrick_bigwig/deeptools/binsize50"
	bigwigpattern = "*ssDNA_type1.deeptools.RPKM.bigwig"		
	
	// GENOME PARAMETERS
	genome = "mm10"

	// OUTPUT PARAMETERS
	outdir = "${baseDir}/${params.name}.outdir/postprocess"
	
	// TOOLS PARAMETERS
	corMethod = "spearman"
	corPlot = "heatmap"
	heatmap_width = "20"
	matrix_downstream = "2500"
	matrix_upstream = "2500"
	gtf_id = "gid"	

	//WEB KEYS PARAMETERS
	tower_token='db33ecd8b1cc2e1b39972b4d82614d379b84f878' // attached to pauline auffret tower account.
}

// PROFILES PARAMETERS
profiles {
  conda {
    process.conda = "${baseDir}/environment.yml"
    conda.createTimeout = '5 h'
  }
  singularity {
    process.container = "${baseDir}/singularity.img"
    singularity.enabled = true
    singularity.autoMounts = true
  }
}

//NEXTFLOW REPORT PARAMETERS
report {
   enabled = true
   file = "${params.outdir}/nxfReports/report.html"
}
 
timeline {
    enabled = true
    file = "${params.outdir}/nxfReports/timeline.html"
}

trace {
   enabled = true
   file = "${params.outdir}/nxfReports/trace.txt"
}

manifest {
   name = 'SSDS post-process pipeline'
   author = 'Pauline Auffret'
   homePage = 'https://gitlab.igh.cnrs.fr/pauline.auffret/ssdspostprocess'
   description = 'Computes and Plots general statistics about SSDS processed data, 2021.'
   mainScript = 'main.nf'
   nextflowVersion = '>=20.04.1'
   version = '1.0'
}

dag {
   enabled = true
   file = "${params.outdir}/nxfReports/dag.png"
}

tower {
  accessToken = params.tower_token
  enabled = false
}


